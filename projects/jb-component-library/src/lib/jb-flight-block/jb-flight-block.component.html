<a
  *ngIf="link || !available"
  [href]="link"
  [target]="target"
  class="no-underline bt bb ba-ns flex-ns w-100 br3-ns overflow-hidden"
  [ngClass]="{
    'jb-block-border pointer': link,
    'bg-off-white b--medium-gray pointer-events-none': !link
  }"
  [attr.aria-disabled]="!link"
  (click)="linkClicked()"
>
  <ng-container [ngTemplateOutlet]="blockContent"></ng-container>
</a>

<div
  *ngIf="available && !link"
  class="bg-off-white bt bb ba-ns flex-ns w-100 br3-ns overflow-hidden b--medium-gray"
  tabindex="0"
>
  <ng-container [ngTemplateOutlet]="blockContent"></ng-container>
</div>

<!-- block content -->
<ng-template #blockContent>
  <div class="jb-fb-img h-7-5" *ngIf="hasImage">
    <ng-content select="jb-image"></ng-content>
  </div>
  <div class="w-100">
    <div *ngIf="hasFlag">
      <ng-content select="jb-flag"></ng-content>
    </div>
    <div
      class="flex-ns justify-between-ns items-start-ns w-100 ph4 mb3"
      [ngClass]="{
        mt3: !hasFlag,
        mt2: hasFlag
      }"
    >
      <div
        class="flex-1-ns"
        [ngClass]="{
          'mb4-ns': hasLegalLink,
          'mb0-ns': !hasLegalLink,
          'mr4-ns': hasButton
        }"
      >
        <h3 class="mb1 core-blue">
          <ng-content select="[JbTitle]"></ng-content>
        </h3>
        <jb-copy class="charcoal">
          <ng-content select="[JbRoute]"></ng-content>
        </jb-copy>
        <ng-content select="[JbRouteDetails]"></ng-content>
        <ng-content select="[JbEditorialContent]"></ng-content>
      </div>
      <div
        *ngIf="hasButton"
        class="flex mt3 mt0-ns"
        [ngClass]="{
          'mb0-ns mb5': hasLegalLink
        }"
      >
        <ng-content select="[JbFareSaleButton]"></ng-content>
      </div>
    </div>
  </div>
</ng-template>

<!-- see restriction link -->
<jb-dialog-link
  *ngIf="hasLegalLink"
  class="dialog-link absolute bottom-0 left-0 mb3"
  [class.with-image]="hasImage"
  (click)="LegalLinkClicked($event)"
>
  See restrictions
</jb-dialog-link>
