<jb-link
  class="db no-underline block-link-z-index pointer relative"
  [ngClass]="{
    'dark-theme': isDarkTheme,
    'light-theme': !isDarkTheme,
    'bg-white': isDarkTheme && !hasContent(background),
    'bg-core-blue': !isDarkTheme && !hasContent(background),
    'bg-transparent': hasContent(background),
    'br-rounded-4': !fullBleed
  }"
  [href]="href"
  [link]="link"
  [target]="target"
>
  <!-- Background Image -->
  <div #background>
    <ng-content select="jb-background"></ng-content>
  </div>
  <!-- Content -->
  <div
    class="jb-max-width center-l center-m"
    [ngClass]="{ 'page-margin negative-page-margin-s': fullBleed }"
  >
    <div class="jb-grid gr-unset">
      <!-- Card -->
      <div
        [ngClass]="{
          'col-5-l col-6-m': cardSize === 'small',
          'col-8-l col-9-m': cardSize === 'large',
          'order-1 order-0-ns': cardVAlignment === 'bottom',
          'order-1-ns': cardHAlignment === 'right',
          'order-0-ns': cardHAlignment !== 'right'
        }"
      >
        <ng-content id="promoCard" select="jb-promo-card"></ng-content>
      </div>
      <!-- Negative Space -->
      <div
        class="relative flex ma0-ns"
        [ngClass]="{
          'min-h-9': cardVAlignment !== 'none',
          mt4: cardVAlignment === 'bottom',
          mt2: cardVAlignment === 'top',
          'dn-s': cardVAlignment === 'none',
          'col-7-l col-6-m': cardSize === 'small',
          'col-4-l col-3-m': cardSize === 'large'
        }"
      >
        <ng-content select="jb-overlay-image"></ng-content>
        <div
          class="z-2 absolute top-0-ns"
          #calloutStamp
          [ngClass]="{
            'jb-grid-ph-s pa0-ns mt5-m mt6-l': hasContent(calloutStamp),
            pb2: cardVAlignment === 'top' && hasContent(calloutStamp),
            'pt2 bottom-0':
              cardVAlignment === 'bottom' && hasContent(calloutStamp),
            'mt6-l': fullBleed,
            'mt4-l': !fullBleed,
            'jb-stamp-right': isOneUpAndStampAlignedRight,
            'right-0': stampAlignment === 'right',
            'jb-stamp-left left-0': stampAlignment === 'left'
          }"
        >
          <ng-content select="jb-callout-stamp"></ng-content>
        </div>
      </div>
    </div>
  </div>
  <jb-sr-only *ngIf="target === '_blank'">Opens in a new window.</jb-sr-only>
</jb-link>
