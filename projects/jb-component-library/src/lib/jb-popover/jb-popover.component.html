<ng-template>
  <jb-popover-inner
    [tabIndex]="focusContainer ? 0 : -1"
    role="dialog"
    cdkTrapFocus
    [attr.aria-describedby]="ariaDescribedBy"
    [attr.aria-labelledby]="ariaLabelledBy"
    class=" br-rounded-4 {{ padding }} ba b--medium-gray"
    [ngStyle]="{ 'z-index': zIndex }"
    [ngClass]="{
      'bg-white jb-popover': !isToolTip,
      'bg-off-white jb-tooltip': isToolTip
    }"
  >
    <ng-container *ngIf="isToolTip; else popoverArrow">
      <div class="absolute tooltip-arrow line-height-0">
        <svg
          width="18px"
          height="22px"
          viewBox="0 0 18 22"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g transform="translate(0,4)">
            <polygon
              fill="#F6F6F6"
              stroke="#d3d3d3"
              stroke-width="1"
              points="0.5 0.5, 17.5 -1, 17.5 17.5"
            />
          </g>
          <rect x="0" y="0" width="17" height="6" fill="#F6F6F6" />
        </svg>
      </div>
    </ng-container>

    <ng-content></ng-content>
  </jb-popover-inner>
</ng-template>

<ng-template #popoverArrow>
  <!-- popover-arrow class is referenced by Popper -->
  <div class="popover-arrow absolute line-height-0" *ngIf="!isToolTip">
    <!-- width: 20px adds extra 2px to left and right for shadow to bleed out -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20px"
      height="12px"
      version="1.1"
    >
      <!-- Extra 2px on left and right to let the shadow bleed out -->
      <g transform="translate(2, 0)">
        <path
          id="rounded-arrow"
          d="M0 0 L4 8 Q8 16 12 8 L16 0"
          fill="white"
          stroke="#d3d3d3"
        ></path>
      </g>
    </svg>
  </div>
</ng-template>
